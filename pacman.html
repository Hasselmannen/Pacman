<!-- original SVG with no collision detection at all -->
<!DOCTYPE html>
<html>
<head>
	<title>Pacman</title>
	<meta charset="utf-8" />
	<style>
		body {
			width: 406px;
			margin: auto;
			margin-top: 10px;
		}
		svg {
			background-color: black;
			border: 3px solid blue;
			border-radius: 9px;
		}
		circle {
			fill: yellow;
		}
		rect {
			stroke: blue;
			stroke-width: 3;
		}
		#ghost_box {
			stroke: blue;
			stroke-width: 3;
		}
	</style>
</head>
<body>
	<svg id="game_screen"
		 version="1.1"
		 baseProfile="full"
		 width="400"
		 height="400"
		 viewport="0 0 400 400">
		<circle id="player" cx="200" cy="100" r="15" />
		<polygon class="box" id="mouth" points="200,100 185,93 185,107" />
		<rect x="40" y="40" height="40" width="140" />
		<rect x="220" y="40" height="40" width="140" />
		<rect x="-3" y="120" height="40" width="83" />
		<rect x="320" y="120" height="40" width="83" />
		<polygon class="box" id="ghost_box" points="140,220 180,220 180,240 120,240 120,120 280,120 280,240 220,240 220,220 260,220 260,140 140,140" />
		<rect x="40" y="200" height="40" width="40" />
		<rect x="320" y="200" height="40" width="40" />
		<rect x="40" y="280" height="40" width="100" />
		<rect x="180" y="280" height="40" width="40" />
		<rect x="260" Y="280" height="40" width="100" />
		<rect x="40" y="360" height="43" width="320" />
	</svg>
	<script>
		game_screen = document.getElementById("game_screen");
		player = document.getElementById("player");
		mouth = document.getElementById("mouth");
		player_x_speed = 0;
		player_y_speed = 0;
		player_x_pos = 200;
		player_y_pos = 100;

		function player_x_move(){
			player_x_pos = player.getAttribute("cx");
			if ((player_x_pos <= 15 && player_x_speed == 1) || (player_x_pos >= 385 && player_x_speed == -1)) {
				player_x_pos = player_x_pos;
				player_x_speed = 0;
			} else {
				player_x_pos = player_x_pos - player_x_speed;
				if (player_x_speed == 1) {
					mouth.setAttribute("points", player_x_pos + "," + player_y_pos + " " + (player_x_pos - 15) + "," + (player_y_pos - 7) + " " + (player_x_pos - 15) + "," + (player_y_pos + 7));
				} else if(player_x_speed == -1 ) {
					mouth.setAttribute("points", player_x_pos + "," + player_y_pos + " " + (player_x_pos + 15) + "," + (player_y_pos - 7) + " " + (player_x_pos + 15) + "," + (player_y_pos + 7));
				}
			}
			player.setAttribute("cx", player_x_pos);
			setTimeout(player_x_move, 10);
		}
		function player_y_move(){
			player_y_pos = player.getAttribute("cy");
			if ((player_y_pos <= 15 && player_y_speed == 1) || (player_y_pos >= 385 && player_y_speed == -1)) {
				player_y_pos = player_y_pos;
				player_y_speed = 0;
			} else {
				player_y_pos = player_y_pos - player_y_speed;
				if(player_y_speed == 1) {
					mouth.setAttribute("points", player_x_pos + "," + player_y_pos + " " + (player_x_pos + 7) + "," + (player_y_pos - 15) + " " + (player_x_pos - 7) + "," + (player_y_pos - 15));
				} else if(player_y_speed == -1) {
					mouth.setAttribute("points", player_x_pos + "," + player_y_pos + " " + (player_x_pos + 7) + "," + (player_y_pos + 15) + " " + (player_x_pos -7) + "," + (player_y_pos + 15));
				}
			}
			player.setAttribute("cy", player_y_pos);
			setTimeout(player_y_move, 10);
		}
		player_x_move();
		player_y_move();
		document.onkeydown = function(event) {
			var e = event.keyCode;
			if (e==37 /* left */) {
				player_x_speed = 1;
				player_y_speed = 0;
			}
			if (e==38 /* up */) {
				player_y_speed = 1;
				player_x_speed = 0;
			}
			if (e==39 /* right */) {
				player_x_speed = -1;
				player_y_speed = 0;
			}
			if (e==40 /* down */) {
				player_y_speed = -1;
				player_x_speed = 0;
			}
		}
	</script>
</body>
</html>
